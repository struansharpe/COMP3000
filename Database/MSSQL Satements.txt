USE COMP3000_SSharpe
GO

CREATE TABLE [User]
(UID int NOT NULL,
CONSTRAINT AK_UID UNIQUE(UID),
CONSTRAINT PK_UID PRIMARY KEY NONCLUSTERED (UID),
FriendlyName varchar (50)NOT NULL,
[Password] varchar (50)NOT NULL,
Email varchar(50) NOT NULL
);
GO







CREATE TABLE HouseHold
(HHID int NOT NULL,
CONSTRAINT AK_HHID UNIQUE(HHID),
CONSTRAINT PK_HHID PRIMARY KEY NONCLUSTERED (HHID),
HHName varchar (50)NOT NULL,
AdminUser int NOT NULL,
CONSTRAINT FK_AdminUser FOREIGN KEY (AdminUser)
        REFERENCES [User] (UID)
ON DELETE NO ACTION
        ON UPDATE NO ACTION,
RestrictedUsers int,
CONSTRAINT FK_RestrictedUsers FOREIGN KEY (RestrictedUsers)
        REFERENCES [User] (UID)
		ON DELETE NO ACTION
        ON UPDATE NO ACTION
 );
GO







CREATE TABLE Room
(RID int NOT NULL,
CONSTRAINT AK_RID UNIQUE(RID),
CONSTRAINT PK_RID PRIMARY KEY NONCLUSTERED (RID),
RoomName varchar (50)NOT NULL,
HHID int CONSTRAINT FK_HHID FOREIGN KEY (HHID)
        REFERENCES HouseHold(HHID)
ON DELETE NO ACTION
        ON UPDATE NO ACTION
);
GO






CREATE TABLE StorageSpace
(SSID int NOT NULL,
CONSTRAINT AK_SSID UNIQUE(SSID),
CONSTRAINT PK_SSID PRIMARY KEY NONCLUSTERED (SSID),
StorageName varchar (50)NOT NULL,
RID int CONSTRAINT FK_RID FOREIGN KEY (RID)
        REFERENCES Room (RID)
ON DELETE NO ACTION
        ON UPDATE NO ACTION
);
GO







CREATE TABLE ItemType
(ITID int CONSTRAINT AK_IYID UNIQUE(ITID),
CONSTRAINT PK_ITID PRIMARY KEY NONCLUSTERED (ITID),
ITName varchar (50) NOT NULL
);
GO

CREATE TABLE Item
(IID int CONSTRAINT AK_IID UNIQUE(IID),
CONSTRAINT PK_IID PRIMARY KEY NONCLUSTERED (IID),
ItemName varchar (50) NOT NULL,
ITID int CONSTRAINT FK_ITID FOREIGN KEY (ITID)
        REFERENCES ItemType (ITID)
ON DELETE NO ACTION
        ON UPDATE NO ACTION
);
GO






CREATE TABLE HouseHoldItem
(HHIID int CONSTRAINT AK_HHIID UNIQUE(HHIID),
CONSTRAINT PK_HHIID PRIMARY KEY NONCLUSTERED (HHIID),
QTY int NOT NULL,
SSID int CONSTRAINT FK_SSID FOREIGN KEY (SSID)
        REFERENCES StorageSpace (SSID)
ON DELETE NO ACTION
        ON UPDATE NO ACTION,
		IID int CONSTRAINT FK_IID FOREIGN KEY (IID)
        REFERENCES Item (IID)
ON DELETE NO ACTION
        ON UPDATE NO ACTION,
		HHID int CONSTRAINT FK_HHoldID FOREIGN KEY (HHID)
        REFERENCES HouseHold(HHID)
ON DELETE NO ACTION
        ON UPDATE NO ACTION
);
GO
 